#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "config.h"
#include "unittest.h"


/** ============================================================================
------------------------------------------------------------------------------*/
static bool normal_settings(void) {
    char str[];

    config_get_str(&str, "key_string");
    if (strcmp(config_get_str("key_string"), "abra"))
        return false;

    if (strcmp(config_get_str("key_int"), "49"))
        return false;

    if (config_get_int("key_int") != 49)
        return false;

    return true;
}

/** ============================================================================
------------------------------------------------------------------------------*/

/** ============================================================================
------------------------------------------------------------------------------*/

/** ============================================================================
------------------------------------------------------------------------------*/

/** ============================================================================
------------------------------------------------------------------------------*/

/** ============================================================================
------------------------------------------------------------------------------*/

/** ============================================================================
------------------------------------------------------------------------------*/
int main(void) {
    char const test_file = "config-test-input.config";
    char *val_str = NULL;
    int ret;

    if (config_load_test_file(test_file)) {
        fprintf(stderr, "Could not load file '%s'\n", test_file);
        return EXIT_FAILURE;
    }

    if (!normal_settings()) return EXIT_FAILURE;

    return EXIT_SUCCESS;
}
